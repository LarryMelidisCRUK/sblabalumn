<!doctype html><html><head><meta charset='utf-8'><title>only_GC_score_list — Visualisations (GGGG-not-allowed)</title>
    <style>
      body{font-family: ui-sans-serif, system-ui, Arial; margin: 0;}
      header{position:sticky; top:0; z-index:10; background:#f9fbff; border-bottom:1px solid #dfe3f0; padding:10px 16px;}
      .crumbs{font-size:12px; color:#555}
      .crumbs a{color:#0645ad; text-decoration:none}
      .toolbar{display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:6px}
      .toolbar select, .toolbar input[type="text"]{padding:4px 6px; border:1px solid #c9cfe0; border-radius:6px}
      .toolbar button{padding:4px 10px; border:1px solid #c9cfe0; border-radius:6px; background:#fff; cursor:pointer}
      main{padding:16px}
      h1,h2,h3{margin: 0.8rem 0;}
      .row{display:flex; gap:16px; flex-wrap:wrap;}
      .col{flex:1; min-width:360px;}
      .card{border:1px solid #e6e9f3; border-radius:10px; padding:12px; margin:12px 0; background:#fff}
      .muted{color:#666}
      a{color:#0645ad; text-decoration:none} a:hover{text-decoration:underline}
      ul{margin:0.4rem 0 0.8rem 1.2rem}
      .small{font-size:12px;color:#555}
      .hidden{display:none}
      .section{margin-top:8px}
      .controls label{margin-right:10px}
      table{border-collapse: collapse; width:100%;}
      th, td{border:1px solid #e6e9f3; padding:6px 8px; font-size:12px;}
      th{background:#f7f9ff;}
      .tabbtn{border:1px solid #c9cfe0; border-radius:6px; padding:6px 10px; background:#f7f7f7; cursor:pointer; margin:4px 6px 8px 0;}
      .tabbtn.active{background:#e9eef9; border-color:#88a;}
    </style>
    
    <script>
      function toggleSection(id){var e=document.getElementById(id); if(!e) return; e.classList.toggle('hidden');}
      function filterByTemp(temp){
        document.querySelectorAll('[data-temp]').forEach(el=>{
          el.style.display = (temp==='all'||el.dataset.temp===temp)?'':'none';
        });
        updateSphere(); updateTotalLength();
      }
      function filterByScheme(sch){
        document.querySelectorAll('[data-scheme]').forEach(el=>{
          el.style.display = (sch==='all'||el.dataset.scheme===sch)?'':'none';
        });
        updateSphere(); updateTotalLength();
      }
      function updateSphere(){
        var l1 = document.getElementById('L1Sel') ? document.getElementById('L1Sel').value : '';
        var l2 = document.getElementById('L2Sel') ? document.getElementById('L2Sel').value : '';
        var l3 = document.getElementById('L3Sel') ? document.getElementById('L3Sel').value : '';
        document.querySelectorAll('.hist_sphere').forEach(el=>{
          var ok = (!l1 || el.dataset.l1===l1) && (!l2 || el.dataset.l2===l2) && (!l3 || el.dataset.l3===l3);
          el.style.display = ok ? '' : 'none';
        });
      }
      function setLControls(a,b,c){
        if(document.getElementById('L1Sel')) document.getElementById('L1Sel').value=String(a);
        if(document.getElementById('L2Sel')) document.getElementById('L2Sel').value=String(b);
        if(document.getElementById('L3Sel')) document.getElementById('L3Sel').value=String(c);
        updateSphere();
      }
      function sphereJump(){
        var v=document.getElementById('sphereFinder').value.trim().replace(/\s+/g,'');
        if(!v) return;
        var m=v.match(/^(\d+)[-_x](\d+)[-_x](\d+)$/);
        if(!m){ alert('Use format l1-l2-l3, e.g., 1-2-3'); return; }
        var link=document.querySelector('a[data-sphere="'+m[1]+"_"+m[2]+"_"+m[3]+'"]');
        if(link){ window.location=link.href; } else { alert('Sphere not found on this page. Check the Spheres index.'); }
      }
      function copyState(){
        const u=new URL(window.location);
        const sch=document.getElementById('schemeSel')?.value||'';
        const temp=document.getElementById('tempSel')?.value||'';
        const l1=document.getElementById('L1Sel')?.value||'';
        const l2=document.getElementById('L2Sel')?.value||'';
        const l3=document.getElementById('L3Sel')?.value||'';
        const tlen=document.querySelector('.tlenbtn.active')?.dataset.len||'';
        u.searchParams.set('scheme', sch); u.searchParams.set('temp', temp);
        if(l1) u.searchParams.set('l1', l1);
        if(l2) u.searchParams.set('l2', l2);
        if(l3) u.searchParams.set('l3', l3);
        if(tlen) u.searchParams.set('tlen', tlen);
        navigator.clipboard.writeText(u.toString()).then(()=>alert('Link copied!'));
      }
      function applyStateFromURL(){
        const u=new URL(window.location);
        const sch=u.searchParams.get('scheme'); const temp=u.searchParams.get('temp');
        const l1=u.searchParams.get('l1'); const l2=u.searchParams.get('l2'); const l3=u.searchParams.get('l3'); const tlen=u.searchParams.get('tlen');
        if(sch && document.getElementById('schemeSel')){ document.getElementById('schemeSel').value=sch; filterByScheme(sch); }
        if(temp && document.getElementById('tempSel')){ document.getElementById('tempSel').value=temp; filterByTemp(temp); }
        if(l1||l2||l3){ setLControls(l1||'', l2||'', l3||''); }
        if(tlen){ var btn=document.querySelector('.tlenbtn[data-len="'+tlen+'"]'); if(btn){ btn.click(); } }
      }
      function showTab(id,btnClass){
        document.querySelectorAll('.tabpane').forEach(x=>x.classList.add('hidden'));
        const el=document.getElementById(id); if(el) el.classList.remove('hidden');
        document.querySelectorAll('.'+btnClass).forEach(x=>x.classList.remove('active'));
        const btn=document.querySelector('[data-target="'+id+'"]'); if(btn) btn.classList.add('active');
      }
      function updateTotalLength(){
        // just re-apply current tab to ensure scheme/temp filters take effect
        const active=document.querySelector('.tlenbtn.active');
        if(active){ showTab(active.dataset.target, 'tlenbtn'); }
      }
      function filterTLTable(containerId){
        const sel=document.querySelector('#'+containerId+' .comboSel');
        const val = sel ? sel.value : 'all';
        document.querySelectorAll('#'+containerId+' table tbody tr').forEach(tr=>{
          tr.style.display = (val==='all' || tr.dataset.combo===val) ? '' : 'none';
        });
      }
      window.addEventListener('DOMContentLoaded', applyStateFromURL);
    </script>
    </head>
    <body>
      <header><div class='crumbs'><a href='../index.html'>Home</a> / <span>only_GC_score_list</span></div>
        <div class="toolbar">
          <label>Scheme:
            <select id="schemeSel" onchange="filterByScheme(this.value)">
              <option value="all">All</option>
              <option value="cal45">cal45</option>
              <option value="cal50">cal50</option>
              <option value="avg45_50">avg45_50</option>
            </select>
          </label>
          <label>Temperature:
            <select id="tempSel" onchange="filterByTemp(this.value)">
              <option value="all">All</option>
              <option value="45">45°C</option><option value="50">50°C</option><option value="55">55°C</option><option value="60">60°C</option><option value="65">65°C</option>
            </select>
          </label>
          
          <input id="sphereFinder" type="text" placeholder="Find sphere e.g. 1-2-3" />
          <button onclick="sphereJump()">Go</button>
          <button onclick="copyState()">Copy link with state</button>
          <span class='small'>Toggle: 
            <a href="javascript:void(0)" onclick="toggleSection('sec_tokens')">3D</a> •
            <a href="javascript:void(0)" onclick="toggleSection('sec_hist')">Hist</a> •
            <a href="javascript:void(0)" onclick="toggleSection('sec_tlen')">Total-length</a> •
            <a href="javascript:void(0)" onclick="toggleSection('sec_len')">By-length</a> •
            <a href="javascript:void(0)" onclick="toggleSection('sec_bump')">Ranks</a>
          </span>
        </div>
      </header>
      <main>
        <h1>only_GC_score_list — Visualisations (GGGG-not-allowed)</h1>
        <div class='card'><ul><li><a href='summary.html'>Summary (interactive)</a></li><li><a href='spheres/index.html'>Spheres (per length)</a></li><li><a href='data/'>Data hub</a></li></ul><p class='small'>Policy: <b>GGGG-not-allowed</b> — sequences containing <code>GGGG</code> are excluded. Colours: RdBu_r (red=high). Scores normalised to 0–100 using cal45, cal50, or avg45_50.</p></div>
      </main>
    </body></html>